{"version":3,"sources":["../node_modules/process/browser.js","main.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","isDebug","global","keys","Settings","CELL_WIDTH","CELL_HEIGHT","CELL_MARGIN","ANIMATION_SWELLING","ANIMATION_GEN_TIME","FONT_SIZE","State","board","merge","moveCells","move","nextState","_moveUp","_rotate","j","dx","dy","k","ni","nj","some","b","result","y","x","value","rot","nextBoard","nextMerge","Math","floor","ny","nx","nextMoveCells","moveCell","fx","fy","tx","ty","cy","num","Game","screen","document","getElementById","animation","Animation","state","v","fillCount","empty","getEmptyCells","random","index","rewriteCells","generate","isDie","finish","calcNextState","update","isClear","alert","bottomCells","cells","pos","Map","itr","cell","Cell","setPos","addY","addX","addNum","cb","progress","time","start","map","forEach","key","console","error","set","proc","timestamp","min","translate","requestAnimationFrame","deleteIndex","animationIndex","addIndex","Date","p","get","changeAttrib","appear","removeChild","elem","delete","type","_initElement","appendChild","posX","posY","style","left","top","height","width","fontSize","sin","PI","lineHeight","backgroundSize","backgroundColor","color","backgroundImage","sisisin2","sisisin4","sisisin8","sisisin16","sisisin32","sisisin64","sisisin128","sisisin256","sisisin512","sisisin1024","sisisin2048","createElement","classList","add","addEventListener","keyCode","game","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","id","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","message","stack","overlay","createErrorOverlay","body","remove","stackTrace","innerText","innerHTML","getParents","modules","parents","d","dep","isArray","Function","deps","cached","cache"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"../src","sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import sisisin2 from './assets/sisisin2.png';\nimport sisisin4 from './assets/sisisin4.png';\nimport sisisin8 from './assets/sisisin8.jpg';\nimport sisisin16 from './assets/sisisin16.jpg';\nimport sisisin32 from './assets/sisisin32.gif';\nimport sisisin64 from './assets/sisisin64.gif';\nimport sisisin128 from './assets/sisisin128.jpg';\nimport sisisin256 from './assets/sisisin256.png';\nimport sisisin512 from './assets/sisisin512.gif';\nimport sisisin1024 from './assets/sisisin1024.jpg';\nimport sisisin2048 from './assets/sisisin2048.jpg';\n\n//*\nconst isDebug = false;\n/*/\nconst isDebug = true;\n//*/\n\nlet global = {\n  keys: [],\n};\n\nlet Settings = {\n  CELL_WIDTH: 100,\n  CELL_HEIGHT: 100,\n  CELL_MARGIN: 12,\n  ANIMATION_SWELLING: 8,\n  ANIMATION_GEN_TIME: 100,\n  FONT_SIZE: 40,\n};\n\n// ゲームの状態を管理するクラス\nclass State {\n  constructor() {\n    // 4 * 4 行列で, 各要素にどういう要素が入っているかを管理する\n    this.board = [];\n    // move したときに, 例えば 2 と 2 がくっついたりして merge されたかどうかを管理する\n    this.merge = [];\n    // move したときに, 動いたセルはどこからどこへ行ったのか\n    this.moveCells = [];\n    // move どの向きに移動したのかを求める\n    // 0: up\n    // 1: right\n    // 2: down\n    // 3: left\n    this.move = -1;\n    for (let i = 0; i < 16; i++) {\n      this.board.push(0);\n      this.merge.push(false);\n    }\n  }\n  // 指示された方向に動いた際の次の State を求める\n  calcNextState(dir) {\n    let nextState = new State();\n    // コピーする\n    for (let i = 0; i < 16; i++) {\n      nextState.board[i] = this.board[i];\n    }\n    if (dir == 0) {\n      // up\n      nextState._moveUp();\n    } else if (dir == 1) {\n      // right\n      nextState._rotate(3);\n      nextState._moveUp();\n      nextState._rotate(1);\n    } else if (dir == 2) {\n      // down\n      nextState._rotate(2);\n      nextState._moveUp();\n      nextState._rotate(2);\n    } else {\n      // left\n      nextState._rotate(1);\n      nextState._moveUp();\n      nextState._rotate(3);\n    }\n    // 動いてたら動いてたという情報を与える\n    this.move = -1;\n    if (this.moveCells.length > 0) {\n      this.move = dir;\n    }\n    return nextState;\n  }\n  // 死んでないか確かめる\n  isDie() {\n    // 全部埋まっていて, かつどの隣り合ったセル同士も異なっていたら true\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 4; j++) {\n        if (this.board[i * 4 + j] === 0) {\n          return false;\n        }\n        const dx = [1, 0];\n        const dy = [0, 1];\n        for (let k = 0; k < 2; ++k) {\n          let ni = i + dy[k],\n            nj = j + dx[k];\n          if (ni >= 4 || nj >= 4) {\n            continue;\n          }\n          if (this.board[i * 4 + j] === this.board[ni * 4 + nj]) {\n            return false;\n          }\n        }\n      }\n    }\n    return true;\n  }\n  isClear() {\n    return this.board.some((b) => b === 2048);\n  }\n  // 空き領域を配列にして返す\n  getEmptyCells() {\n    let result = [];\n    for (let i = 0; i < 16; i++) {\n      if (this.board[i] == 0) {\n        result.push(i);\n      }\n    }\n    return result;\n  }\n  // セルの値を書き換える(ランダムに出現するのをイメージ)\n  // だけど別の用途で使ってもいいやという\n  // y, x: 場所\n  rewriteCells(y, x, value) {\n    this.board[y * 4 + x] = value;\n  }\n  // board を時計回りに回転させる\n  _rotate(rot) {\n    for (let i = 0; i < rot; ++i) {\n      let nextBoard = [];\n      let nextMerge = [];\n      for (let j = 0; j < 16; ++j) {\n        let y = Math.floor(j / 4),\n          x = j - 4 * y;\n        let ny = x,\n          nx = 3 - y;\n        nextBoard[ny * 4 + nx] = this.board[j];\n        nextMerge[ny * 4 + nx] = this.merge[j];\n      }\n      this.board = nextBoard;\n      this.merge = nextMerge;\n      let nextMoveCells = [];\n      for (let i = 0; i < this.moveCells.length; ++i) {\n        const moveCell = this.moveCells[i];\n        let fx = moveCell.fx,\n          fy = moveCell.fy,\n          tx = moveCell.tx,\n          ty = moveCell.ty;\n        nextMoveCells.push({ fx: 3 - fy, fy: fx, tx: 3 - ty, ty: tx });\n      }\n      this.moveCells = nextMoveCells;\n    }\n  }\n  // 後 _moveUp が必要ですね\n  _moveUp() {\n    // merge 情報をリセット\n    for (let y = 0; y < 4; y++) {\n      for (let x = 0; x < 4; x++) {\n        this.merge[y * 4 + x] = false;\n      }\n    }\n    // 上から順番に見ていき, くっつけられるならくっつけていく\n    for (let y = 1; y < 4; y++) {\n      for (let x = 0; x < 4; ++x) {\n        if (this.board[y * 4 + x] === 0) continue;\n        let cy = y;\n        while (cy >= 1) {\n          const num = this.board[(cy - 1) * 4 + x];\n          if (num === 0) {\n            // 上が空いてるなら普通に動かす\n            this.board[(cy - 1) * 4 + x] = this.board[cy * 4 + x];\n            this.board[cy * 4 + x] = 0;\n            --cy;\n          } else if (\n            num === this.board[cy * 4 + x] &&\n            !this.merge[cy * 4 + x] &&\n            !this.merge[(cy - 1) * 4 + x]\n          ) {\n            // 上と同じ数なら合体させる\n            this.board[(cy - 1) * 4 + x] = 2 * num;\n            this.board[cy * 4 + x] = 0;\n            this.merge[(cy - 1) * 4 + x] = true;\n            --cy;\n          } else {\n            break;\n          }\n        }\n        if (cy != y) {\n          // 少なくとも一マス動いているので動き情報を記録\n          this.moveCells.push({ fx: x, fy: y, tx: x, ty: cy });\n        }\n      }\n    }\n  }\n}\n\n// Game 全体を管理するクラス\nexport class Game {\n  constructor() {\n    // 制御するセルを指定\n    this.screen = document.getElementById('gameBoard');\n    this.animation = new Animation(this.screen);\n    this.state = new State();\n    const v = [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048];\n    const fillCount = isDebug ? v.length : 2;\n    // 初期状態として 2 つ cell を入れておく\n    for (let i = 0; i < fillCount; i++) {\n      const empty = this.state.getEmptyCells();\n\n      const num = isDebug ? v[i] ?? 0 : Math.random() < 0.9 ? 2 : 4;\n      const index = empty[Math.floor(Math.random() * empty.length)];\n      const y = Math.floor(index / 4),\n        x = index % 4;\n      this.state.rewriteCells(y, x, num);\n      this.animation.generate(this.screen, y, x, num, 1);\n    }\n  }\n  // キー入力に対応してゴニョゴニョする\n  move(dir) {\n    if (this.state.isDie()) return;\n    if (!this.animation.finish) return;\n    let nextState = this.state.calcNextState(dir);\n    // いずれかのセルが動いたならば\n    if (nextState.moveCells.length > 0) {\n      // ランダムに数字を挿入する処理\n      const empty = nextState.getEmptyCells();\n      const num = Math.random() < 0.9 ? 2 : 4;\n      const index = empty[Math.floor(Math.random() * empty.length)];\n      const y = Math.floor(index / 4),\n        x = index % 4;\n\n      // なんやかんや\n      nextState.rewriteCells(y, x, num);\n\n      // アニメーション\n      this.animation.update(nextState, y, x, num, () => {\n        if (nextState.isClear()) {\n          alert('clear!');\n        }\n        if (nextState.isDie()) {\n          alert('詰んだ');\n        }\n      });\n\n      // state を更新\n      this.state = nextState;\n    }\n  }\n}\n\nclass Animation {\n  constructor(screen) {\n    // 下に並べて置くセル\n    this.bottomCells = [];\n    // 実際に動くセル\n    this.cells = [];\n    // セルの位置を覚えておく\n    // this.cells[i] の位置は this.pos[i] が覚えておく\n    this.pos = new Map();\n    // 新しいセルを出現させるときのイテレーター的な\n    this.itr = 0;\n    for (let i = 0; i < 16; i++) {\n      const y = Math.floor(i / 4),\n        x = i % 4;\n      const cell = new Cell(0, screen);\n      cell.setPos(y, x);\n      this.bottomCells.push(cell);\n    }\n    this.screen = screen;\n    // アニメーションが終了したかどうか\n    this.finish = true;\n  }\n  // 指定したセル群を移動させる -> 合体させる -> 新しい数字が表れる\n  // 引数：State クラス\n  // 最後に merge したところから数字を登場させる\n  update(state, addY, addX, addNum, cb = () => {}) {\n    // アニメーション開始\n    this.finish = false;\n    // 移動するアニメーション\n    {\n      let progress = 0;\n      const time = Settings.ANIMATION_GEN_TIME;\n      let start = null;\n\n      // index -> 目標位置\n      let map = new Map();\n      for (const move of state.moveCells) {\n        let index = -1;\n        this.pos.forEach((value, key, map) => {\n          if (value.x === move.fx && value.y === move.fy) {\n            index = key;\n          }\n        });\n        if (index === -1) {\n          console.error('cell not found!');\n          continue;\n        }\n        map.set(index, move);\n      }\n      map.forEach((value, key, map) => {\n        this.pos.set(key, { x: value.tx, y: value.ty });\n      });\n\n      const proc = (timestamp) => {\n        if (!start) {\n          start = timestamp;\n        }\n        progress = (timestamp - start) / time;\n        progress = Math.min(progress, 1);\n\n        if (progress >= 0) {\n          map.forEach((value, key, map) => {\n            this.cells[key].translate(value.fx, value.fy, value.tx, value.ty, progress);\n          });\n        }\n\n        if (progress < 1) {\n          requestAnimationFrame(proc);\n        }\n      };\n      requestAnimationFrame(proc);\n    }\n    // 数字が合体して数字が表れるアニメーション\n    {\n      // removeChild する要素の index\n      let deleteIndex = [];\n      // 数を倍にする要素の index\n      let animationIndex = [];\n      // merge が true になる場所に向かっているセルは必ず二つあるので, 一つは delete に入れてもう一つは animation に入れる\n      for (let y = 0; y < 4; ++y) {\n        for (let x = 0; x < 4; ++x) {\n          if (state.merge[y * 4 + x]) {\n            // this.pos から index を二つ探す\n            let index = [];\n            this.pos.forEach((value, key, map) => {\n              if (value.x === x && value.y === y) {\n                index.push(key);\n              }\n            });\n            deleteIndex.push(index[0]);\n            animationIndex.push(index[1]);\n          }\n        }\n      }\n      // 新しく追加する数字\n      const addIndex = this.itr++;\n      this.pos.set(addIndex, { x: addX, y: addY });\n\n      let progress = 0;\n      const time = Settings.ANIMATION_GEN_TIME;\n      let start = null;\n\n      const proc = () => {\n        if (!start) {\n          start = new Date();\n          this.cells[addIndex] = new Cell(addNum, this.screen);\n        }\n        let timestamp = new Date();\n        progress = (timestamp - start) / time;\n        progress = Math.min(progress, 1);\n\n        if (progress >= 0) {\n          for (let index of animationIndex) {\n            let p = this.pos.get(index);\n            this.cells[index].changeAttrib(state.board[p.y * 4 + p.x]);\n            this.cells[index].appear(this.pos.get(index).y, this.pos.get(index).x, progress, 2);\n          }\n          this.cells[addIndex].appear(addY, addX, progress, 1);\n        }\n\n        if (progress < 1) {\n          requestAnimationFrame(proc);\n        } else {\n          // アニメーション終了\n          this.finish = true;\n          for (let index of deleteIndex) {\n            this.screen.removeChild(this.cells[index].elem);\n            this.cells[index] = null;\n            this.pos.delete(index);\n          }\n          cb();\n        }\n      };\n      setTimeout(proc, Settings.ANIMATION_GEN_TIME * 1.1);\n    }\n  }\n  // 数字が表れる\n  // screen: 親要素\n  // [y, x] 座標に num を登場させるアニメーション\n  // type: アニメーションの仕方(0: 特に何も 1: 広がる感じ(ランダムに表れるやつ) 2: 広がってから落ち着く(合体するやつ))\n  generate(screen, y, x, num, type = 0) {\n    let index = -1;\n    this.pos.forEach((value, key, map) => {\n      if (value.x === x && value.y === y) {\n        index = key;\n      }\n    });\n    if (index !== -1) {\n      this.cells[index].changeAttrib(num);\n      return;\n    }\n    index = this.itr++;\n    this.cells[index] = new Cell(num, screen);\n    this.pos.set(index, { x: x, y: y });\n    let progress = 0;\n    let start = null;\n    const time = Settings.ANIMATION_GEN_TIME;\n\n    const update = (timestamp) => {\n      if (!start) {\n        start = timestamp;\n      }\n      progress = (timestamp - start) / time;\n      progress = Math.min(progress, 1);\n\n      if (progress >= 0) {\n        this.cells[index].appear(y, x, progress, type);\n      }\n\n      if (progress < 1) {\n        requestAnimationFrame(update);\n      }\n    };\n    requestAnimationFrame(update);\n  }\n}\n\n// Cell を管理するクラス\nclass Cell {\n  // num: 数字\n  // screen: 親要素\n  constructor(num, screen) {\n    this.elem = this._initElement();\n    screen.appendChild(this.elem);\n    this.changeAttrib(num);\n  }\n  // 移動する\n  // fx, fy: どこから\n  // tx, ty: どこへ\n  // process: 進捗率\n  translate(fx, fy, tx, ty, process) {\n    const x = fx + (tx - fx) * process;\n    const y = fy + (ty - fy) * process;\n    const posX = x * (Settings.CELL_WIDTH + Settings.CELL_MARGIN) + Settings.CELL_MARGIN;\n    const posY = y * (Settings.CELL_HEIGHT + Settings.CELL_MARGIN) + Settings.CELL_MARGIN;\n    this.elem.style.left = `${posX}px`;\n    this.elem.style.top = `${posY}px`;\n  }\n  // セルを配置\n  // y, x: 配置する位置\n  setPos(y, x) {\n    this.appear(y, x, 0);\n  }\n  // 新しいセルが現れるアニメーション\n  // y, x: 出てくる位置\n  // process: 進捗率\n  // type: アニメーションの仕方(0: 特に何も 1: 広がる感じ(ランダムに表れるやつ) 2: 広がってから落ち着く(合体するやつ))\n  appear(y, x, progress, type = 0) {\n    let height = Settings.CELL_HEIGHT;\n    let width = Settings.CELL_WIDTH;\n    let posY = y * (Settings.CELL_HEIGHT + Settings.CELL_MARGIN) + Settings.CELL_MARGIN;\n    let posX = x * (Settings.CELL_WIDTH + Settings.CELL_MARGIN) + Settings.CELL_MARGIN;\n    let fontSize = Settings.FONT_SIZE;\n    if (type === 1) {\n      height = Settings.CELL_HEIGHT * progress;\n      width = Settings.CELL_WIDTH * progress;\n      posX =\n        x * (Settings.CELL_WIDTH + Settings.CELL_MARGIN) +\n        Settings.CELL_MARGIN +\n        (Settings.CELL_WIDTH - width) / 2;\n      posY =\n        y * (Settings.CELL_HEIGHT + Settings.CELL_MARGIN) +\n        Settings.CELL_MARGIN +\n        (Settings.CELL_HEIGHT - height) / 2;\n      fontSize = Settings.FONT_SIZE * progress;\n    } else if (type === 2) {\n      height = Settings.CELL_HEIGHT + Settings.ANIMATION_SWELLING * Math.sin(Math.PI * progress);\n      width = Settings.CELL_WIDTH + Settings.ANIMATION_SWELLING * Math.sin(Math.PI * progress);\n      posX =\n        x * (Settings.CELL_WIDTH + Settings.CELL_MARGIN) +\n        Settings.CELL_MARGIN +\n        (Settings.CELL_WIDTH - width) / 2;\n      posY =\n        y * (Settings.CELL_HEIGHT + Settings.CELL_MARGIN) +\n        Settings.CELL_MARGIN +\n        (Settings.CELL_HEIGHT - height) / 2;\n      fontSize = Settings.FONT_SIZE * (height / Settings.CELL_HEIGHT);\n    }\n    this.elem.style.left = `${posX}px`;\n    this.elem.style.top = `${posY}px`;\n    this.elem.style.height = `${height}px`;\n    this.elem.style.width = `${width}px`;\n    this.elem.style.fontSize = `${fontSize}px`;\n    this.elem.style.lineHeight = `${height}px`;\n  }\n  // セルの値を変更する\n  changeAttrib(num) {\n    // this.elem.textContent = num > 0 ? num : '';\n    this.elem.style.backgroundSize = 'cover';\n\n    this.num = num;\n    switch (num) {\n      case 0:\n        this.elem.style.backgroundColor = '#ccc';\n        this.elem.style.color = '#000';\n        break;\n      case 2:\n        this.elem.style.backgroundImage = `url(\"${sisisin2}\")`;\n        this.elem.style.backgroundColor = '#eee';\n        this.elem.style.color = '#000';\n        break;\n      case 4:\n        this.elem.style.backgroundImage = `url(\"${sisisin4}\")`;\n        this.elem.style.backgroundColor = '#eec';\n        this.elem.style.color = '#000';\n        break;\n      case 8:\n        this.elem.style.backgroundImage = `url(\"${sisisin8}\")`;\n        this.elem.style.backgroundColor = '#f93';\n        this.elem.style.color = '#fff';\n        break;\n      case 16:\n        this.elem.style.backgroundImage = `url(\"${sisisin16}\")`;\n        this.elem.style.backgroundColor = '#c66';\n        this.elem.style.color = '#fff';\n        break;\n      case 32:\n        this.elem.style.backgroundImage = `url(\"${sisisin32}\")`;\n        this.elem.style.backgroundColor = '#c33';\n        this.elem.style.color = '#fff';\n        break;\n      case 64:\n        this.elem.style.backgroundImage = `url(\"${sisisin64}\")`;\n        this.elem.style.backgroundColor = '#c11';\n        this.elem.style.color = '#fff';\n        break;\n      case 128:\n        this.elem.style.backgroundImage = `url(\"${sisisin128}\")`;\n        this.elem.style.backgroundColor = '#fc6';\n        this.elem.style.color = '#fff';\n        break;\n      case 256:\n        this.elem.style.backgroundImage = `url(\"${sisisin256}\")`;\n        this.elem.style.backgroundColor = '#fc5';\n        this.elem.style.color = '#fff';\n        break;\n      case 512:\n        this.elem.style.backgroundImage = `url(\"${sisisin512}\")`;\n        this.elem.style.backgroundColor = '#fc3';\n        this.elem.style.color = '#fff';\n        break;\n      case 1024:\n        this.elem.style.backgroundImage = `url(\"${sisisin1024}\")`;\n        this.elem.style.backgroundColor = '#fc1';\n        this.elem.style.color = '#fff';\n        break;\n      case 2048:\n        this.elem.style.backgroundImage = `url(\"${sisisin2048}\")`;\n        this.elem.style.backgroundColor = '#fc0';\n        this.elem.style.color = '#fff';\n        break;\n      default:\n        this.elem.style.backgroundColor = '#222';\n        this.elem.style.color = '#fff';\n        break;\n    }\n  }\n  _initElement() {\n    const result = document.createElement('div');\n    result.classList.add('gameCell');\n    return result;\n  }\n}\n\n// const game = new Game();\n\n// key 入力\ndocument.addEventListener('keydown', (e) => {\n  global.keys[e.keyCode] = true;\n  if (global.keys[38]) {\n    // up\n    game.move(0);\n  } else if (global.keys[39]) {\n    // right\n    game.move(1);\n  } else if (global.keys[40]) {\n    // down\n    game.move(2);\n  } else if (global.keys[37]) {\n    // left\n    game.move(3);\n  } else {\n    return;\n  }\n});\ndocument.addEventListener('keyup', (e) => {\n  global.keys[e.keyCode] = false;\n});\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}